<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tencent腾讯</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" />
    <link type="text/css" rel="stylesheet" href="css/common.css" />
    <link href="css/receptionist.css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
</head>

<body>
    <div class="contain">
        <!-- 头部 -->
        <header>
            <div class="sub-con">
                <div class="h-left">
                    物资登记
                </div>
                <div class="h-right">
                    <span class="s1">腾讯大厦</span>
                    <span class="s2">7楼员工服务窗口</span>
                    <img class="s3" src="images/user.jpg">
                    <span class="s4">v_hfengwang</span>
                </div>
            </div>
        </header>
        <!-- 中间内容 -->
        <div class="sub-con">
            <div class="middle recep-con">
                <div class="recep-list recep-blue">
                    <div class="clearfix">
                        <div class="left reTitle-left">借/取产品</div>
                        <div class="right reTitle-right"><a href="receptionistBorrow.html"><span>显示全部借/取</span><span><img src="images/arrow_right.png" /></span></a></div>
                    </div>
                    <div class="recep-item">
                        <ul class="clearfix">
                            <li class="recep-itemList" id="100">
                                <span>领取证明</span>
                            </li>
                            <li>
                                <span>材料盖章</span>
                            </li>
                            <li class="recep-itemList" id="101">
                                <span>领取公仔</span>
                            </li>
                            <li>
                                <span>领取Q币</span>
                            </li>
                            <li>
                                <span>领取文化衫</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="recep-list recep-yellow">
                    <div class="clearfix">
                        <div class="left reTitle-left">交/还产品</div>
                        <div class="right reTitle-right"><a href="receptionistReturn.html"><span>显示全部交/还</span><span><img src="images/arrow_right.png" /></span></a></div>
                    </div>
                    <div class="recep-item">
                        <ul class="clearfix">
                            <li class="recep-itemList" id="102">
                                <span>归还档案材料</span>
                            </li>
                            <li>
                                <span>社保卡</span>
                            </li>
                            <li class="recep-itemList" id="103">
                                <span>归还户口卡</span>
                            </li>
                            <li>
                                <span>政府安居</span>
                            </li>
                            <li>
                                <span>毕业生落户</span>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="recep-btn">
                    <span class="cancel">取消</span>
                    <span class="yes">确定</span>
                </div>
            </div>
        </div>
        <!-- 底部 -->
        <footer>
            <p>技术支持：8002(人力资源IT热线）</p>
            <p>Copyright©1998-2014Tencent All Rights Reserved</p>
        </footer>
        <div class="back"></div>
        <!-- 借/取弹框内容 -->
        <div class="back-cnt back-blue">
            <p class="back-title">领取公仔</p>
            <div class="recep-item">
                <ul class="clearfix">
                    <li>
                        <span>归还档案材料</span>
                    </li>
                    <li>
                        <span>社保卡</span>
                    </li>
                    <li>
                        <span>归还户口卡</span>
                    </li>
                    <li>
                        <span>政府安居</span>
                    </li>
                    <li>
                        <span>毕业生落户</span>
                    </li>
                </ul>
            </div>
            <div class="back-btn">
                <p class="back-cancel">取消</p>
                <p class="back-ok">确定</p>
            </div>
        </div>
        <!-- 交/还弹框内容 -->
        <div class="back-cnt back-yellow">
            <p class="back-title">归还档案材料</p>
            <div class="recep-item">
                <ul class="clearfix">
                    <li>
                        <span>归还档案材料</span>
                    </li>
                    <li>
                        <span>社保卡</span>
                    </li>
                    <li>
                        <span>归还户口卡</span>
                    </li>
                    <li>
                        <span>政府安居</span>
                    </li>
                    <li>
                        <span>毕业生落户</span>
                    </li>
                </ul>
            </div>
            <div class="back-btn">
                <p class="back-cancel">取消</p>
                <p class="back-ok">确定</p>
            </div>
        </div>
        <!-- 所在区域弹框内容 -->
        <div class="back-cnt back-green">
            <p class="back-title">所在区域</p>
            <div class="recep-item">
                <ul class="clearfix">
                    <li>
                        <span>区域一</span>
                    </li>
                    <li>
                        <span>区域二</span>
                    </li>
                    <li>
                        <span>区域三</span>
                    </li>
                    <li>
                        <span>区域四</span>
                    </li>
                    <li>
                        <span>区域五</span>
                    </li>
                </ul>
            </div>
            <div class="back-btn">
                <p class="back-cancel">取消</p>
                <p class="back-ok" id="recepOk">确定</p>
            </div>
        </div>
    </div>
    <script>
        $(function () {
            var curID = "";
            var serverData = [
                {
                    "pid":100,
                    "name":"领取证明",
                    "subList":[
                        {
                            "id":1,
                            "name":"领取证明1",
                            "status":0
                        },
                        {
                            "id":2,
                            "name": "领取证明2",
                            "status":0
                        },
                        {
                            "id":3,
                            "name": "领取证明3",
                            "status":0
                        },
                        {
                            "id":4,
                            "name": "领取证明4",
                            "status":0
                        }
                    ]
                },
                {
                    "pid": 101,
                    "name": "领取公仔",
                    "subList": [
                        {
                            "id": 1,
                            "name": "公仔1",
                            "status": 0
                        },
                        {
                            "id": 2,
                            "name": "公仔2",
                            "status": 0
                        },
                        {
                            "id": 3,
                            "name": "公仔3",
                            "status": 0
                        },
                        {
                            "id": 4,
                            "name": "公仔4",
                            "status": 0
                        }
                    ]
                },
                {
                    "pid": 102,
                    "name": "归还档案材料",
                    "subList": [
                        {
                            "id": 1,
                            "name": "归还档案材料1",
                            "status": 0
                        },
                        {
                            "id": 2,
                            "name": "归还档案材料2",
                            "status": 0
                        },
                        {
                            "id": 3,
                            "name": "归还档案材料3",
                            "status": 0
                        },
                        {
                            "id": 4,
                            "name": "归还档案材料4",
                            "status": 0
                        }
                    ]
                },
                {
                    "pid": 103,
                    "name": "归还户口卡",
                    "subList": [
                        {
                            "id": 1,
                            "name": "归还户口卡1",
                            "status": 0
                        },
                        {
                            "id": 2,
                            "name": "归还户口卡2",
                            "status": 0
                        },
                        {
                            "id": 3,
                            "name": "归还户口卡3",
                            "status": 0
                        },
                        {
                            "id": 4,
                            "name": "归还户口卡4",
                            "status": 0
                        }
                    ]
                }
            ]  
            //借取，交还
            $(".recep-item").delegate("li","click", function (event) {
                event.stopPropagation();
                var _index = $(this).index();
                if (!$(this).hasClass("recep-itemList")) {
                    $(this).toggleClass("active");
                }else if($(this).hasClass("recep-itemList") && $(this).parents(".recep-list").hasClass("recep-blue")) {
                    $(".back-blue").attr('data-open', _index);
                    $("body").addClass('no-scroll');
                    var pidss = $(this).attr("id");
                    curID = pidss;
                    var html = '';
                    for (var n = 0; n < serverData.length;n++){
                        if (serverData[n].pid == pidss) {
                            var list = serverData[n].subList;
                            for (i = 0; i < list.length; i++) {
                                var name = list[i].name;
                                var status = list[i].status;
                                if (status == 1) {
                                    html += "<li class='active'>" + name + "</li>";
                                } else {
                                    html += "<li>" + name + "</li>";
                                }
                            }
                        }
                    }
                    $(".back-blue .recep-item ul").html(html);
                    $(".back,.back-blue").show();
                } else if ($(this).hasClass("recep-itemList") && $(this).parents(".recep-list").hasClass("recep-yellow")) {
                    $(".back-yellow").attr('data-open', _index);
                    $("body").addClass('no-scroll');
                    var pidss = $(this).attr("id");
                    curID = pidss;
                    var html = '';
                    for (var n = 0; n < serverData.length; n++) {
                        if (serverData[n].pid == pidss) {
                            var list = serverData[n].subList;
                            for (i = 0; i < list.length; i++) {
                                var name = list[i].name;
                                var status = list[i].status;
                                if (status == 1) {
                                    html += "<li class='active'>" + name + "</li>";
                                } else {
                                    html += "<li>" + name + "</li>";
                                }
                            }
                        }
                    }
                    $(".back-yellow .recep-item ul").html(html);
                    $(".back,.back-yellow").show();
                }
            });
            //关闭弹框
            $(".back-btn p").click(function() {
                $(".back,.back-cnt").hide();
                $(".back-cnt").data('');
                $("body").removeClass('no-scroll');
            });
            //借/取产品点击确定
            $(".back-blue .back-ok").click(function () {
                var _liindex = $(this).parent().parent().attr('data-open');
                var hasActive = $(this).parent().parent().find(".recep-item li").hasClass("active");
                if (hasActive) {
                    $(".recep-blue .recep-item li").eq(_liindex).addClass("active");
                } else {
                    $(".recep-blue .recep-item li").eq(_liindex).removeClass("active");
                }
                for (var n = 0; n < serverData.length; n++) {
                    if (serverData[n].pid == curID) {
                        var list = serverData[n].subList; 
                        $(".back-blue .recep-item ul li").each(function () {
                            var flag = $(this).hasClass("active");
                            var ind = $(this).index();
                            if (flag) {
                                list[ind].status = 1;
                            } else {
                                list[ind].status = 0;
                            } 
                        }); 
                    }
                }
            });
            //交/还产品点击确定
            $(".back-yellow .back-ok").click(function () {
                var _liindex = $(this).parent().parent().attr('data-open');
                var hasActive = $(this).parent().parent().find(".recep-item li").hasClass("active");
                if (hasActive) {
                    $(".recep-yellow .recep-item li").eq(_liindex).addClass("active");
                } else {
                    $(".recep-yellow .recep-item li").eq(_liindex).removeClass("active");
                }
                for (var n = 0; n < serverData.length; n++) {
                    if (serverData[n].pid == curID) {
                        var list = serverData[n].subList; 
                        $(".back-yellow .recep-item ul li").each(function () {
                            var flag = $(this).hasClass("active");
                            var ind = $(this).index(); 
                            if (flag) {
                                list[ind].status = 1;
                            } else {
                                list[ind].status = 0;
                            }
                        }); 
                    }
                }
            });
            //区域
            $(".recep-btn .yes").click(function () {
                $(".back,.back-green").show();
                $("body").addClass('no-scroll');
            });
            // 区域确定按钮
            $("#recepOk").on("click", function () {
                window.location.href = "billList.html";
            });
        });
    </script>
</body>

</html>